define(["jquery","core/str","core/modal_factory","block_ludifica/alertc","core/log"],function(o,n,i,a,t){var e=[],s=(e.push({key:"badgelinkcopiedtoclipboard",component:"block_ludifica"}),e.push({key:"showranking",component:"block_ludifica"}),e.push({key:"hideranking",component:"block_ludifica"}),[]);0<e.length&&(e.forEach(n=>{s[n.key]=n.key}),n.get_strings(e).then(function(t){var i=0;return e.forEach(n=>{s[n.key]=t[i],i++}),!0}).fail(function(n){t.debug("Error loading strings"),t.debug(n)}));return{init:function(){o(".block_ludifica-modal").each(function(){var n=o(this),t={title:n.attr("title")||"",body:n.html()};0<n.find("footer").length&&(t.footer=n.find("footer")),n.data("type")&&(t.type=n.data("type")),i.create(t,o('.block_ludifica-modalcontroller[data-ref-id="'+n.attr("id")+'"]'))}),o(".block_ludifica-content").each(function(){var e=o(this);e.find(".block_ludifica-tabs").each(function(){var t=o(this),i=[];t.find("[data-ref]").each(function(){var n=o(this);i.push(n),n.on("click",function(){i.forEach(n=>{o(n.data("ref")).removeClass("active showranking")}),t.find(".active[data-ref]").removeClass("active"),n.addClass("active"),o(n.data("ref")).addClass("active")})}),e.find("[data-ludifica-tab]").each(function(){var n=o(this);n.on("click",function(){var t=".tab-"+n.data("ludifica-tab");i.forEach(n=>{0<=n.data("ref").indexOf(t)&&n.trigger("click")})})})}),e.find(".showrankingbutton").each(function(){var i=!1,t=o(this),a=e.find(".tabranking");0<a.length&&(t.on("click",function(n){n.stopPropagation(),i?(e.find(".tabranking").removeClass("showranking"),t.removeClass("activebtn"),t.text(s.showranking)):(o(a[0]).addClass("showranking"),t.addClass("activebtn"),t.text(s.hideranking)),e.find(".closeludifica").on("click",function(){e.find(".showranking").removeClass("showranking"),e.find(".showrankingbutton").removeClass("activebtn"),e.find(".showrankingbutton").text(s.showranking),i=!1}),i=!i}),o(document).on("click",function(n){var t=e.find(".tabranking");t.is(n.target)||0!==t.has(n.target).length||(i&&(e.find(".showranking").removeClass("showranking"),e.find(".showrankingbutton").removeClass("activebtn"),e.find(".showrankingbutton").text(s.showranking)),i=!1)}),e.find(".shownexttop").on("click",function(){var i=null,n=(a.each((n,t)=>{t=o(t);t.hasClass("showranking")&&(i=n,t.removeClass("showranking"))}),i>=a.length-1?0:i+1);o(a[n]).addClass("showranking")}))}),e.find(".showhelpsbutton").each(function(){var i=!1;o(this).on("click",function(n){n.stopPropagation(),i?(e.find(".tab-dynamichelps").removeClass("showhelps"),o(this).removeClass("activebtn"),o(this).find(".pix-initial").show(),o(this).find(".pix-toggle").hide()):(e.find(".tab-dynamichelps").addClass("showhelps"),o(this).addClass("activebtn"),o(this).find(".pix-initial").hide(),o(this).find(".pix-toggle").show()),e.find(".closeludifica").on("click",function(){o(".showhelps").removeClass("showhelps"),o(".showhelpsbutton").removeClass("activebtn"),o(".showhelpsbutton").find(".pix-initial").show(),o(".showhelpsbutton").find(".pix-toggle").hide(),i=!1}),i=!i}),o(document).on("click",function(n){var t=o(".tab-dynamichelps");t.is(n.target)||0!==t.has(n.target).length||(i&&(o(".showhelps").removeClass("showhelps"),o(".showhelpsbutton").removeClass("activebtn"),o(".showhelpsbutton").find(".pix-initial").show(),o(".showhelpsbutton").find(".pix-toggle").hide()),i=!1)})})}),o("body").on("updatefailed","[data-inplaceeditable]",function(n){var t=n.exception;n.preventDefault(),"nicknameexists"==t.errorcode&&(a.error(t.message),t.errorcode=null)}),o("[data-observe-resizes]").each(function(){if("ResizeObserver"in self){let n=new ResizeObserver(function(n){var t={XS:0,SM:384,MD:576,LG:768,XL:960};n.forEach(function(i){var a=i.target.dataset.breakpoints?JSON.parse(i.target.dataset.breakpoints):t;Object.keys(a).forEach(function(n){var t=a[n];i.contentRect.width>=t?i.target.classList.add(n):i.target.classList.remove(n)})})});n.observe(this)}})}}});
//# sourceMappingURL=main.min.js.map
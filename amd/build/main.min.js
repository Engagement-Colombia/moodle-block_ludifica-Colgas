define(["jquery","core/str","core/modal_factory","block_ludifica/alertc","core/log"],function(e,n,t,a,i){var o=[],s=(o.push({key:"badgelinkcopiedtoclipboard",component:"block_ludifica"}),o.push({key:"showranking",component:"block_ludifica"}),o.push({key:"hideranking",component:"block_ludifica"}),[]);0<o.length&&(o.forEach(n=>{s[n.key]=n.key}),n.get_strings(o).then(function(i){var t=0;return o.forEach(n=>{s[n.key]=i[t],t++}),!0}).fail(function(n){i.debug("Error loading strings"),i.debug(n)}));return{init:function(){e(".block_ludifica-modal").each(function(){var n=e(this),i={title:n.attr("title")||"",body:n.html()};0<n.find("footer").length&&(i.footer=n.find("footer")),n.data("type")&&(i.type=n.data("type")),t.create(i,e('.block_ludifica-modalcontroller[data-ref-id="'+n.attr("id")+'"]'))}),e(".block_ludifica-content").each(function(){var a=e(this);a.find(".block_ludifica-tabs").each(function(){var i=e(this),t=[];i.find("[data-ref]").each(function(){var n=e(this);t.push(n),n.on("click",function(){t.forEach(n=>{e(n.data("ref")).removeClass("active showranking")}),i.find(".active[data-ref]").removeClass("active"),n.addClass("active"),e(n.data("ref")).addClass("active")})}),a.find("[data-ludifica-tab]").each(function(){var n=e(this);n.on("click",function(){var i=".tab-"+n.data("ludifica-tab");t.forEach(n=>{0<=n.data("ref").indexOf(i)&&n.trigger("click")})})})}),a.find(".showrankingbutton").each(function(){var t=!1,i=e(this);i.on("click",function(n){n.stopPropagation(),t?(a.find(".tabranking").removeClass("showranking"),i.removeClass("activebtn"),i.text(s.showranking)):(a.find(".tab-topbysite").addClass("showranking"),i.addClass("activebtn"),i.text(s.hideranking)),a.find(".closeludifica").on("click",function(){a.find(".showranking").removeClass("showranking"),a.find(".showrankingbutton").removeClass("activebtn"),a.find(".showrankingbutton").text(s.showranking),t=!1}),t=!t}),e(document).on("click",function(n){var i=a.find(".tabranking");i.is(n.target)||0!==i.has(n.target).length||(t&&(a.find(".showranking").removeClass("showranking"),a.find(".showrankingbutton").removeClass("activebtn"),a.find(".showrankingbutton").text(s.showranking)),t=!1)}),a.find(".showtopbysite").on("click",function(){a.find(".tabranking").removeClass("showranking"),a.find(".tab-topbysite").addClass("showranking")}),a.find(".showtopbycourse").on("click",function(){a.find(".tabranking").removeClass("showranking"),a.find(".tab-topbycourse").addClass("showranking")}),a.find(".showlastmonth").on("click",function(){a.find(".tabranking").removeClass("showranking"),a.find(".tab-lastmonth").addClass("showranking")})}),a.find(".showhelpsbutton").each(function(){var t=!1;e(this).on("click",function(n){n.stopPropagation(),t?(a.find(".tab-dynamichelps").removeClass("showhelps"),e(this).removeClass("activebtn"),e(this).find(".pix-initial").show(),e(this).find(".pix-toggle").hide()):(a.find(".tab-dynamichelps").addClass("showhelps"),e(this).addClass("activebtn"),e(this).find(".pix-initial").hide(),e(this).find(".pix-toggle").show()),a.find(".closeludifica").on("click",function(){e(".showhelps").removeClass("showhelps"),e(".showhelpsbutton").removeClass("activebtn"),e(".showhelpsbutton").find(".pix-initial").show(),e(".showhelpsbutton").find(".pix-toggle").hide(),t=!1}),t=!t}),e(document).on("click",function(n){var i=e(".tab-dynamichelps");i.is(n.target)||0!==i.has(n.target).length||(t&&(e(".showhelps").removeClass("showhelps"),e(".showhelpsbutton").removeClass("activebtn"),e(".showhelpsbutton").find(".pix-initial").show(),e(".showhelpsbutton").find(".pix-toggle").hide()),t=!1)})})}),e("body").on("updatefailed","[data-inplaceeditable]",function(n){var i=n.exception;n.preventDefault(),"nicknameexists"==i.errorcode&&(a.error(i.message),i.errorcode=null)}),e("[data-observe-resizes]").each(function(){if("ResizeObserver"in self){let n=new ResizeObserver(function(n){var i={XS:0,SM:384,MD:576,LG:768,XL:960};n.forEach(function(t){var a=t.target.dataset.breakpoints?JSON.parse(t.target.dataset.breakpoints):i;Object.keys(a).forEach(function(n){var i=a[n];t.contentRect.width>=i?t.target.classList.add(n):t.target.classList.remove(n)})})});n.observe(this)}})}}});
//# sourceMappingURL=main.min.js.map
/**
 * Javascript to initialise the block.
 *
 * @module    block/ludifica
 * @copyright 2021 David Herney @ BambuCo
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_ludifica/main",["jquery","core/str","core/modal_factory","block_ludifica/alertc","core/log"],(function($,str,ModalFactory,Alertc,Log){var strings=[];strings.push({key:"badgelinkcopiedtoclipboard",component:"block_ludifica"});var s=[];strings.length>0&&(strings.forEach((function(one){s[one.key]=one.key})),str.get_strings(strings).then((function(results){var pos=0;return strings.forEach((function(one){s[one.key]=results[pos],pos++})),!0})).fail((function(e){Log.debug("Error loading strings"),Log.debug(e)})));return{init:function(){$(".block_ludifica-modal").each((function(){var $element=$(this),props={title:$element.attr("title")||"",body:$element.html()};$element.find("footer").length>0&&(props.footer=$element.find("footer")),$element.data("type")&&(props.type=$element.data("type")),ModalFactory.create(props,$('.block_ludifica-modalcontroller[data-ref-id="'+$element.attr("id")+'"]'))})),$(".block_ludifica-tabs").each((function(){var $tabs=$(this),tabslist=[];$tabs.find("[data-ref]").each((function(){var $tab=$(this);tabslist.push($tab),$tab.on("click",(function(){tabslist.forEach((function(one){$(one.data("ref")).removeClass("active")})),$tabs.find(".active[data-ref]").removeClass("active"),$tab.addClass("active"),$($tab.data("ref")).addClass("active")}))}))})),$("body").on("updatefailed","[data-inplaceeditable]",(function(e){var exception=e.exception;e.preventDefault(),"nicknameexists"==exception.errorcode&&(Alertc.error(exception.message),exception.errorcode=null)})),$(".openshare").on("click",(function(){var $content=$(".share_badge_modal"),$title=$content.attr("title");return ModalFactory.create({title:$title,body:$content.html()}).then((function(modal){return modal.show().then((function(){return $('input[name="badgelink"]').on("click",(function(){var $input=$(this);$input.select(),document.execCommand("copy");var $msg=$('<div class="msg-badgelink-copy">'+s.badgelinkcopiedtoclipboard+"</div>");$input.parent().append($msg),window.setTimeout((function(){$msg.remove()}),1600)})),!0}))})).fail((function(e){Log.debug("Error creating modal share buttons"),Log.debug(e)})),!0})),$("[data-observe-resizes]").each((function(){"ResizeObserver"in self&&new ResizeObserver((function(entries){var defaultBreakpoints={XS:0,SM:384,MD:576,LG:768,XL:960};entries.forEach((function(entry){var breakpoints=entry.target.dataset.breakpoints?JSON.parse(entry.target.dataset.breakpoints):defaultBreakpoints;Object.keys(breakpoints).forEach((function(breakpoint){var minWidth=breakpoints[breakpoint];entry.contentRect.width>=minWidth?entry.target.classList.add(breakpoint):entry.target.classList.remove(breakpoint)}))}))})).observe(this)}))}}}));

//# sourceMappingURL=main.min.js.map
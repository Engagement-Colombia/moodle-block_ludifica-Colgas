define(["jquery","core/str","core/modal_factory","block_ludifica/alertc","core/log"],function(e,n,i,a,t){var o=[],s=(o.push({key:"badgelinkcopiedtoclipboard",component:"block_ludifica"}),o.push({key:"showranking",component:"block_ludifica"}),o.push({key:"hideranking",component:"block_ludifica"}),[]);0<o.length&&(o.forEach(n=>{s[n.key]=n.key}),n.get_strings(o).then(function(t){var i=0;return o.forEach(n=>{s[n.key]=t[i],i++}),!0}).fail(function(n){t.debug("Error loading strings"),t.debug(n)}));return{init:function(){e(".block_ludifica-modal").each(function(){var n=e(this),t={title:n.attr("title")||"",body:n.html()};0<n.find("footer").length&&(t.footer=n.find("footer")),n.data("type")&&(t.type=n.data("type")),i.create(t,e('.block_ludifica-modalcontroller[data-ref-id="'+n.attr("id")+'"]'))}),e(".block_ludifica-content").each(function(){var a=e(this);a.find(".block_ludifica-tabs").each(function(){var t=e(this),i=[];t.find("[data-ref]").each(function(){var n=e(this);i.push(n),n.on("click",function(){i.forEach(n=>{e(n.data("ref")).removeClass("active showranking")}),t.find(".active[data-ref]").removeClass("active"),n.addClass("active"),e(n.data("ref")).addClass("active")})}),a.find("[data-ludifica-tab]").each(function(){var n=e(this);n.on("click",function(){var t=".tab-"+n.data("ludifica-tab");i.forEach(n=>{0<=n.data("ref").indexOf(t)&&n.trigger("click")})})})}),a.find(".showrankingbutton").each(function(){var i=!1,t=e(this);t.on("click",function(n){n.stopPropagation(),i?(a.find(".tabranking").removeClass("showranking"),t.removeClass("activebtn"),t.text(s.showranking)):(a.find(".tab-topbysite").addClass("showranking"),t.addClass("activebtn"),t.text(s.hideranking)),a.find(".closeranking").on("click",function(){a.find(".showranking").removeClass("showranking"),a.find(".showrankingbutton").removeClass("activebtn"),a.find(".showrankingbutton").text(s.showranking),i=!1}),i=!i}),e(document).on("click",function(n){var t=a.find(".tabranking");t.is(n.target)||0!==t.has(n.target).length||(i&&(a.find(".showranking").removeClass("showranking"),a.find(".showrankingbutton").removeClass("activebtn"),a.find(".showrankingbutton").text(s.showranking)),i=!1)}),a.find(".showtopbysite").on("click",function(){a.find(".tabranking").removeClass("showranking"),a.find(".tab-topbysite").addClass("showranking")}),a.find(".showtopbycourse").on("click",function(){a.find(".tabranking").removeClass("showranking"),a.find(".tab-topbycourse").addClass("showranking")}),a.find(".showlastmonth").on("click",function(){a.find(".tabranking").removeClass("showranking"),a.find(".tab-lastmonth").addClass("showranking")})}),a.find(".showhelpsbutton").each(function(){var i=!1;e(this).on("click",function(n){n.stopPropagation(),i?(a.find(".tab-dynamichelps").removeClass("showhelps"),e(this).removeClass("activebtn"),e(this).find(".pix-initial").show(),e(this).find(".pix-toggle").hide()):(a.find(".tab-dynamichelps").addClass("showhelps"),e(this).addClass("activebtn"),e(this).find(".pix-initial").hide(),e(this).find(".pix-toggle").show()),i=!i}),e(document).on("click",function(n){var t=e(".tab-dynamichelps");t.is(n.target)||0!==t.has(n.target).length||(i&&(e(".showhelps").removeClass("showhelps"),e(".showhelpsbutton").removeClass("activebtn"),e(".showhelpsbutton").find(".pix-initial").show(),e(".showhelpsbutton").find(".pix-toggle").hide()),i=!1)})})}),e("body").on("updatefailed","[data-inplaceeditable]",function(n){var t=n.exception;n.preventDefault(),"nicknameexists"==t.errorcode&&(a.error(t.message),t.errorcode=null)}),e("[data-observe-resizes]").each(function(){if("ResizeObserver"in self){let n=new ResizeObserver(function(n){var t={XS:0,SM:384,MD:576,LG:768,XL:960};n.forEach(function(i){var a=i.target.dataset.breakpoints?JSON.parse(i.target.dataset.breakpoints):t;Object.keys(a).forEach(function(n){var t=a[n];i.contentRect.width>=t?i.target.classList.add(n):i.target.classList.remove(n)})})});n.observe(this)}})}}});
//# sourceMappingURL=main.min.js.map
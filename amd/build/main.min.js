define(["jquery","core/str","core/modal_factory","block_ludifica/alertc","core/log"],function(e,t,n,i,a){var o=[],s=(o.push({key:"badgelinkcopiedtoclipboard",component:"block_ludifica"}),o.push({key:"showranking",component:"block_ludifica"}),o.push({key:"hideranking",component:"block_ludifica"}),[]);0<o.length&&(o.forEach(t=>{s[t.key]=t.key}),t.get_strings(o).then(function(a){var n=0;return o.forEach(t=>{s[t.key]=a[n],n++}),!0}).fail(function(t){a.debug("Error loading strings"),a.debug(t)}));return{init:function(){e(".block_ludifica-modal").each(function(){var t=e(this),a={title:t.attr("title")||"",body:t.html()};0<t.find("footer").length&&(a.footer=t.find("footer")),t.data("type")&&(a.type=t.data("type")),n.create(a,e('.block_ludifica-modalcontroller[data-ref-id="'+t.attr("id")+'"]'))}),e(".block_ludifica-content").each(function(){var i=e(this);i.find(".block_ludifica-tabs").each(function(){var a=e(this),n=[];a.find("[data-ref]").each(function(){var t=e(this);n.push(t),t.on("click",function(){n.forEach(t=>{e(t.data("ref")).removeClass("active showranking")}),a.find(".active[data-ref]").removeClass("active"),t.addClass("active"),e(t.data("ref")).addClass("active")})}),i.find("[data-ludifica-tab]").each(function(){var t=e(this);t.on("click",function(){var a=".tab-"+t.data("ludifica-tab");n.forEach(t=>{0<=t.data("ref").indexOf(a)&&t.trigger("click")})})})}),i.find(".showrankingbutton").each(function(){var n=!1,a=e(this);a.on("click",function(t){t.stopPropagation(),n?(i.find(".tabranking").removeClass("showranking"),a.removeClass("activebtn"),a.text(s.showranking)):(i.find(".tab-topbysite").addClass("showranking"),a.addClass("activebtn"),a.text(s.hideranking)),n=!n}),e(document).on("click",function(t){var a=i.find(".tabranking");a.is(t.target)||0!==a.has(t.target).length||(n&&(e(".showranking").removeClass("showranking"),e(".showrankingbutton").removeClass("activebtn"),e(".showrankingbutton").text(s.showranking)),n=!1)}),i.find(".showtopbysite").on("click",function(){e(".tabranking").removeClass("showranking"),i.find(".tab-topbysite").addClass("showranking")}),i.find(".showtopbycourse").on("click",function(){e(".tabranking").removeClass("showranking"),i.find(".tab-topbycourse").addClass("showranking")}),i.find(".showlastmonth").on("click",function(){e(".tabranking").removeClass("showranking"),i.find(".tab-lastmonth").addClass("showranking")})}),i.find(".showhelpsbutton").each(function(){var n=!1;e(this).on("click",function(t){t.stopPropagation(),n?(e(".tab-dynamichelps").removeClass("showhelps"),e(this).removeClass("activebtn"),e(this).find(".pix-initial").show(),e(this).find(".pix-toggle").hide()):(i.find(".tab-dynamichelps").addClass("showhelps"),e(this).addClass("activebtn"),e(this).find(".pix-initial").hide(),e(this).find(".pix-toggle").show()),n=!n}),e(document).on("click",function(t){var a=e(".tab-dynamichelps");a.is(t.target)||0!==a.has(t.target).length||(n&&(e(".showhelps").removeClass("showhelps"),e(".showhelpsbutton").removeClass("activebtn"),e(".showhelpsbutton").find(".pix-initial").show(),e(".showhelpsbutton").find(".pix-toggle").hide()),n=!1)})})}),e("body").on("updatefailed","[data-inplaceeditable]",function(t){var a=t.exception;t.preventDefault(),"nicknameexists"==a.errorcode&&(i.error(a.message),a.errorcode=null)}),e("[data-observe-resizes]").each(function(){if("ResizeObserver"in self){let t=new ResizeObserver(function(t){var a={XS:0,SM:384,MD:576,LG:768,XL:960};t.forEach(function(n){var i=n.target.dataset.breakpoints?JSON.parse(n.target.dataset.breakpoints):a;Object.keys(i).forEach(function(t){var a=i[t];n.contentRect.width>=a?n.target.classList.add(t):n.target.classList.remove(t)})})});t.observe(this)}})}}});
//# sourceMappingURL=main.min.js.map
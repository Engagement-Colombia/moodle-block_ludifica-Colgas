define(["jquery","core/str","core/modal_factory","block_ludifica/alertc","core/log"],function(e,t,a,i,n){var o=[],s=(o.push({key:"badgelinkcopiedtoclipboard",component:"block_ludifica"}),o.push({key:"showranking",component:"block_ludifica"}),o.push({key:"hideranking",component:"block_ludifica"}),[]);0<o.length&&(o.forEach(t=>{s[t.key]=t.key}),t.get_strings(o).then(function(n){var a=0;return o.forEach(t=>{s[t.key]=n[a],a++}),!0}).fail(function(t){n.debug("Error loading strings"),n.debug(t)}));return{init:function(){e(".block_ludifica-modal").each(function(){var t=e(this),n={title:t.attr("title")||"",body:t.html()};0<t.find("footer").length&&(n.footer=t.find("footer")),t.data("type")&&(n.type=t.data("type")),a.create(n,e('.block_ludifica-modalcontroller[data-ref-id="'+t.attr("id")+'"]'))}),e(".block_ludifica-content").each(function(){var i=e(this);i.find(".block_ludifica-tabs").each(function(){var n=e(this),a=[];n.find("[data-ref]").each(function(){var t=e(this);a.push(t),t.on("click",function(){a.forEach(t=>{e(t.data("ref")).removeClass("active showranking")}),n.find(".active[data-ref]").removeClass("active"),t.addClass("active"),e(t.data("ref")).addClass("active")})}),i.find("[data-ludifica-tab]").each(function(){var t=e(this);t.on("click",function(){var n=".tab-"+t.data("ludifica-tab");a.forEach(t=>{0<=t.data("ref").indexOf(n)&&t.trigger("click")})})})}),i.find(".showrankingbutton").each(function(){var a=!1,n=e(this);n.on("click",function(t){t.stopPropagation(),a?(i.find(".tabranking").removeClass("showranking"),n.removeClass("activebtn"),n.text(s.showranking)):(i.find(".tab-topbysite").addClass("showranking"),n.addClass("activebtn"),n.text(s.hideranking)),a=!a}),e(document).on("click",function(t){var n=i.find(".tabranking");n.is(t.target)||0!==n.has(t.target).length||(a&&(i.find(".showranking").removeClass("showranking"),i.find(".showrankingbutton").removeClass("activebtn"),i.find(".showrankingbutton").text(s.showranking)),a=!1)}),i.find(".showtopbysite").on("click",function(){i.find(".tabranking").removeClass("showranking"),i.find(".tab-topbysite").addClass("showranking")}),i.find(".showtopbycourse").on("click",function(){i.find(".tabranking").removeClass("showranking"),i.find(".tab-topbycourse").addClass("showranking")}),i.find(".showlastmonth").on("click",function(){i.find(".tabranking").removeClass("showranking"),i.find(".tab-lastmonth").addClass("showranking")})}),i.find(".showhelpsbutton").each(function(){var a=!1;e(this).on("click",function(t){t.stopPropagation(),a?(i.find(".tab-dynamichelps").removeClass("showhelps"),e(this).removeClass("activebtn"),e(this).find(".pix-initial").show(),e(this).find(".pix-toggle").hide()):(i.find(".tab-dynamichelps").addClass("showhelps"),e(this).addClass("activebtn"),e(this).find(".pix-initial").hide(),e(this).find(".pix-toggle").show()),a=!a}),e(document).on("click",function(t){var n=e(".tab-dynamichelps");n.is(t.target)||0!==n.has(t.target).length||(a&&(e(".showhelps").removeClass("showhelps"),e(".showhelpsbutton").removeClass("activebtn"),e(".showhelpsbutton").find(".pix-initial").show(),e(".showhelpsbutton").find(".pix-toggle").hide()),a=!1)})})}),e("body").on("updatefailed","[data-inplaceeditable]",function(t){var n=t.exception;t.preventDefault(),"nicknameexists"==n.errorcode&&(i.error(n.message),n.errorcode=null)}),e("[data-observe-resizes]").each(function(){if("ResizeObserver"in self){let t=new ResizeObserver(function(t){var n={XS:0,SM:384,MD:576,LG:768,XL:960};t.forEach(function(a){var i=a.target.dataset.breakpoints?JSON.parse(a.target.dataset.breakpoints):n;Object.keys(i).forEach(function(t){var n=i[t];a.contentRect.width>=n?a.target.classList.add(t):a.target.classList.remove(t)})})});t.observe(this)}})}}});
//# sourceMappingURL=main.min.js.map
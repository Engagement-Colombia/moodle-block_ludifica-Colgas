define(["jquery","core/notification","core/str","core/ajax","block_ludifica/alertc","block_ludifica/player","core/log"],function(n,a,e,c,t,i,u){var r=[];return{init:function(){var o=[{key:"avatarbuy",component:"block_ludifica"},{key:"avatarbuymessage",component:"block_ludifica"},{key:"buy",component:"block_ludifica"},{key:"notbuy",component:"block_ludifica"},{key:"bought",component:"block_ludifica"},{key:"avataruse",component:"block_ludifica"},{key:"avatarusemessage",component:"block_ludifica"},{key:"use",component:"block_ludifica"},{key:"avatarnotuse",component:"block_ludifica"},{key:"avatarused",component:"block_ludifica"},{key:"cancel"},{key:"continue"},{key:"error"},{key:"info"}];o.forEach(function(a){r[a.key]=a.key}),e.get_strings(o).then(function(a){return a.forEach(function(a,e){r[o[e].key]=a}),!0}).fail(function(a){u.debug("Error get strings"),u.debug(a)}),n('[data-action="buy"]').on("click",function(){var e=n(this).data("id");a.confirm(r.avatarbuy,r.avatarbuymessage,r.buy,r.cancel,function(){c.call([{methodname:"block_ludifica_buy_avatar",args:{id:e},done:function(a){a?(t.success(r.bought),(a=n("#avatar-"+e)).removeClass("usernothas"),a.addClass("userhas"),i.reloadStats()):t.error(r.notbuy)},fail:function(a){u.debug("Error buy avatar"),u.debug(a)}}])})}),n('[data-action="use"]').on("click",function(){var e=n(this).data("id");a.confirm(r.avataruse,r.avatarusemessage,r.use,r.cancel,function(){c.call([{methodname:"block_ludifica_use_avatar",args:{id:e},done:function(a){a?(t.success(r.avatarused),n(".oneavatar.inuse").removeClass("inuse"),(a=n("#avatar-"+e)).addClass("inuse"),u.debug(a)):t.error(r.avatarnotuse)},fail:function(a){u.debug("Error assigning avatar"),u.debug(a)}}])})})}}});
//# sourceMappingURL=avatars.min.js.map
define(["jquery","core/str","core/modal_factory","core/log","core/templates"],function(i,e,o,c,d){var a=[{key:"badgelinkcopiedtoclipboard",component:"block_ludifica"}],u=[];a.forEach(function(e){u[e.key]=e.key}),e.get_strings(a).then(function(e){return e.forEach(function(e,n){u[a[n].key]=e}),!0}).fail(function(e){c.debug("Error loading strings"),c.debug(e)});return{init:function(a){i(".openshare").on("click",function(){var n=i(".share_badge_modal").attr("title"),r={id:i(this).data("badgeid")},e=i("#badge-"+r.id),t=(r.thumbnail=e.find(".picture-box img").attr("src"),r.url=e.find(".shareurl").attr("href"),r.name=e.data("name"),r.year=e.data("year"),r.month=e.data("month"),r.uniquehash=e.data("uniquehash"),{networks:[],thumbnailurl:r.thumbnail,badge:r});return a.forEach(e=>{let n=e.url;var a=r.url.replace(/[=]/g,"%3d");n=(n=(n=(n=(n=n.replace(/{name}/gi,encodeURI(r.name))).replace(/{url}/gi,a)).replace(/{badgeyear}/gi,r.year)).replace(/{badgemonth}/gi,r.month)).replace(/{badgeid}/gi,r.uniquehash),t.networks[t.networks.length]={url:n,icon:e.icon,iconsource:"core",name:e.icon}}),d.render("block_ludifica/sharebadge",t).then(function(e){o.create({title:n,body:e}).done(function(e){return e.getBody().find('input[name="badgelink"]').on("click",function(){var e=i(this),n=(e.select(),document.execCommand("copy"),i('<div class="msg-badgelink-copy">'+u.badgelinkcopiedtoclipboard+"</div>"));e.parent().append(n),window.setTimeout(function(){n.remove()},1600)}),e.show()}).fail(function(e){c.debug("Error creating modal share buttons"),c.debug(e)})}),!0})}}});
//# sourceMappingURL=badges.min.js.map
define(["jquery","core/notification","core/str","core/ajax","block_ludifica/alertc","block_ludifica/player","core/modal_factory","core/log","core/templates"],function(i,e,a,n,r,t,o,c,d){var l=[{key:"badgelinkcopiedtoclipboard",component:"block_ludifica"}],u=[];l.forEach(function(e){u[e.key]=e.key}),a.get_strings(l).then(function(e){return e.forEach(function(e,a){u[l[a].key]=e}),!0}).fail(function(e){c.debug("Error loading strings"),c.debug(e)});return{init:function(n){i(".openshare").on("click",function(){var e=i(".share_badge_modal").attr("title"),r={id:i(this).data("badgeid")},a=i("#badge-"+r.id),t=(r.thumbnail=a.find(".thumbnail").attr("src"),r.url=a.find(".shareurl").attr("href"),r.name=a.data("name"),r.year=a.data("year"),r.month=a.data("month"),r.uniquehash=a.data("uniquehash"),{networks:[],thumbnailurl:r.thumbnail,badge:r});return n.forEach(e=>{let a=e.url;var n=r.url.replace(/[=]/g,"%3d");a=(a=(a=(a=(a=a.replace(/{name}/gi,encodeURI(r.name))).replace(/{url}/gi,n)).replace(/{badgeyear}/gi,r.year)).replace(/{badgemonth}/gi,r.month)).replace(/{badgeid}/gi,r.uniquehash),t.networks[t.networks.length]={url:a,icon:e.icon,iconsource:"core",name:e.icon}}),o.create({title:e,body:d.render("block_ludifica/sharebadge",t)}).then(function(e){return e.show().then(function(){return i('input[name="badgelink"]').on("click",function(){var e=i(this),a=(e.select(),document.execCommand("copy"),i('<div class="msg-badgelink-copy">'+u.badgelinkcopiedtoclipboard+"</div>"));e.parent().append(a),window.setTimeout(function(){a.remove()},1600)}),!0})}).fail(function(e){c.debug("Error creating modal share buttons"),c.debug(e)}),!0})}}});
//# sourceMappingURL=badges.min.js.map